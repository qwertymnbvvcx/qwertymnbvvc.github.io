/* @preserve version 4.78.11 */
!function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};var t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;r>n;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function n(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);r.length>o;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function r(){for(var e=0,t=0,n=arguments.length;n>t;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;n>t;t++)for(var i=arguments[t],a=0,u=i.length;u>a;a++,o++)r[o]=i[a];return r}function o(e){if(Array.isArray(e))return e.slice();var t={};for(var n in e)t[n]=e[n];return t}function i(e,t,n){return function(e){return"object"==typeof e}(e)&&null!==e&&t in e?e[t]:n}function a(e,t,n){var r=t[0],o=t.slice(1);return i(e,r)&&o.length?a(e[r],o,n):i(e,r,n)}function u(e,t,n){return Array.isArray(t)?a(e,t,n):i(e,t,n)}function c(e,t,n){if(e[t]===n)return e;var r=o(e);return r[t]=n,r}function s(e,t,n){if(a(e,t)===n)return e;var r=t[0],i=t.slice(1),u=o(e);return u[r]=i.length?s(r in u?u[r]:{},i,n):n,u}function l(e){for(var t,n,r=arguments,o=arguments.length,i=e,a=1;o>a;a+=2)n=r[a+1],i=Array.isArray(t=r[a])?s(i,t,n):c(i,t,n);return i}function f(e,t){if(!(t in e))return e;var n=o(e);return delete n[t],n}function d(e,t){if(!function e(t,n){var r=n[0],o=n.slice(1);return o.length?r in t&&e(t[r],o):r in t}(e,t))return e;var n=t[0],r=t.slice(1),i=o(e);return 0!==r.length?(i[n]=d(e[n],r),0===Object.keys(i[n]).length&&delete i[n]):delete i[n],i}function p(e){for(var t,n=arguments,r=arguments.length,o=0,i=e;++o<r;)i=Array.isArray(t=n[o])?d(i,t):f(i,t);return i}var v=t({global:"tracking",initialState:{},disableJsonp:!1,enrichTimeout:1500},{api:"https://www.tinkoff.ru/api/v1/",configApi:"https://config.tinkoff.ru/",papiBase:"https://www.tinkoff.ru/",enrichApi:"https://enrichment.tinkoff.ru/",frontLogApi:"/api/front/log/"}),m=/^\d+(0|s|t)\d+$/,g=["utm_source","utm_content","utm_campaign","utm_medium","utm_term","sid","wm"],h=["ctx_position","ctx_block","ctx_source"],y=["internal_source"];function w(e){var t=e.location.query.parent_url,n=e.get("parseUrl");if(t)return n(t)}var b={name:"url",run:function(e){var t=w(e),n=t||e.location;return t&&(n.frameurl=e.location.pathname),n}};function k(e){return Promise.all(e.map((function(e){return e.then((function(e){return{status:"fulfilled",value:e}})).catch((function(e){return{status:"rejected",reason:e}}))})))}var O="undefined"!=typeof Request&&"keepalive"in new Request(""),_=function(e){return fetch(e,{mode:"no-cors",credentials:"include",keepalive:O})};function S(e,t){for(var n={},r=0,o=e;o.length>r;r++){var i=o[r];i in t&&(n[i]=t[i])}return n}function P(e,t,n){void 0===t&&(t="&"),void 0===n&&(n="=");for(var r={},o=0,i=e.split(t);i.length>o;o++){var a=(i[o]+"").split(n);if(a[0]&&a[1]){var u=a[1];try{u=decodeURIComponent(a[1])}catch(e){}r[decodeURIComponent(a[0])]=u}}return r}function E(e){void 0===e&&(e=document.location);var n=t(t({},S(["hash","host","hostname","href","pathname","port","protocol","search","origin"],e)),{query:P(e.search.slice(1))});return"/"!==n.pathname[0]&&(n.pathname="/"+n.pathname),n}function j(){for(var e=[],t=0;arguments.length>t;t++)e[t]=arguments[t];return 0===e.length?function(e){return e}:1===e.length?e[0]:e.reduce((function(e,t){return function(){for(var n=[],r=0;arguments.length>r;r++)n[r]=arguments[r];return e(t.apply(void 0,n))}}))}var x=function(){},I="log function is now deprecated, use logger object instead";var N=function(){function e(e){this.clear=this.getSafeVersionOfMethod("clear",void 0),this.key=this.getSafeVersionOfMethod("key",null),this.setItem=this.getSafeVersionOfMethod("setItem",void 0),this.getItem=this.getSafeVersionOfMethod("getItem",null),this.removeItem=this.getSafeVersionOfMethod("removeItem",void 0),this.storageType=e}return Object.defineProperty(e.prototype,"length",{get:function(){try{return this.storage.length}catch(e){}return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){if(!this.storageImpl){var e={local:localStorage,session:sessionStorage};this.storageImpl=e[this.storageType]}return this.storageImpl},enumerable:!1,configurable:!0}),e.prototype.getSafeVersionOfMethod=function(e,t){var n=this;return function(){for(var r,o=[],i=0;arguments.length>i;i++)o[i]=arguments[i];try{return(r=n.storage)[e].apply(r,o)}catch(e){}return t}},e}(),T=new N("local"),L=new N("session"),D=function(){};var A=function(){function e(e){void 0===e&&(e={}),this.services={},this._env="u"===(typeof window)[0]?"server":"client";for(var t=0,n=Object.keys(e);n.length>t;t++){var r=n[t];this.bind(r,e[r])}}return Object.defineProperty(e.prototype,"env",{get:function(){return this._env},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"location",{get:function(){return this.get("location")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cookies",{get:function(){return this.get("cookies")},enumerable:!1,configurable:!0}),e.prototype.get=function(e){var t=this.services[e];if(void 0!==t)return t;throw Error("No service "+e)},e.prototype.getOr=function(e,t){var n=this.services[e];return void 0!==n?n:t},e.prototype.bind=function(e,t){this.services[e]=t},e}();var C={tapi:function(e,n,r){return void 0===r&&(r={}),e.get("request")(""+e.get("config").api+n,t({},r)).then((function(e){return e.json()}))},configApi:function(e,n,r){void 0===r&&(r={});var o=e.get("config").configApi;return e.get("request")(""+o+n,t({},r)).then((function(e){return e.json()}))}};var M=function(e){var n,r=e.url,o=e.payload,i=e.timeout,a=e.cbname,u=void 0===a?"callback":a,c="cb"+function e(t){var n=Math.random().toString(36).slice(2);return 10>n.length?e():n}(),s=function(e){for(var t=[],n=0,r=Object.keys(e);r.length>n;n++){var o=r[n];e[o]&&t.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]))}return t.length?"?"+t.join("&"):""}(t(((n={})[u]=c,n),o));return new Promise((function(e,t){var n=document.createElement("script"),o=!1;n.addEventListener("error",(function(e){o||(t(e),o=!0)})),window[c]=function(t){delete window[c],document.head.removeChild(n),o||(e(t),o=!0)},n.src=r+s,document.head.appendChild(n),i&&setTimeout((function(){o||(o=!0,t(Error("Timeout")))}),i)}))};function U(e){var t=document.createElement("a");return t.href=e,E(t)}var F=function(t){function n(e){var n=t.call(this,"Not success status code of request: "+e.status+" "+e.statusText)||this;return n.statusCode=e.status,n.statusText=e.statusText,n.url=e.url,n}return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(n,t),n}(Error);function q(e){if(200>e.status||e.status>=400)throw new F(e);return e}var R=function(e,r){void 0===r&&(r={});var o=r.headers,i=r.timeout,a=void 0===i?1500:i,u=r.body,c=r.method,s=void 0===c?"GET":c,l=n(r,["headers","timeout","body","method"]),f={},d={method:s,headers:f},p=function(e){if("AbortController"in window){var t=new AbortController;return setTimeout((function(){t.abort()}),e),t.signal}}(a);return p&&(d.signal=p),void 0!==u&&(d.body="string"==typeof u?u:JSON.stringify(u),f["Content-Type"]="application/json"),Object.assign(d.headers,o),fetch(e,t(t({},d),l)).then(q)},z=/^(?:::(?:ffff:(0:)?)?)?(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/,B=/^([0-9a-fA-F]{1,4}:){1,4}:(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/;function H(e){return z.test(t=e)||B.test(t)?e:0>e.indexOf("localhost")?"."+e.split(".").slice(-2).join("."):"localhost";var t}function J(e){var t=(("; "+document.cookie).split("; "+e+"=")[1]||"").split("; ")[0];try{return decodeURIComponent(t)}catch(e){return t}}function V(){var e=H(location.hostname),t=(document.cookie="test_cookie_QpHfCYJQhs=true; samesite=none; secure",""!==J("test_cookie_QpHfCYJQhs"));function n(n,r,o,i){var a=[];a.push(n+"="+encodeURIComponent(r)),o&&"boolean"!=typeof o&&Number.isFinite(o)&&a.push("expires="+new Date(Number(new Date)+1e3*o).toUTCString()),a.push("path=/"),i&&a.push("domain="+e),t&&(a.push("samesite=none"),a.push("secure")),document.cookie=a.join("; ")}return{all:P(document.cookie,"; ","="),get:J,set:n,remove:function(e,t){n(e,"",-1,t)}}}var G=function(){try{var e=new CustomEvent("a",{detail:{b:"c"}});return"a"===e.type&&"c"===e.detail.b}catch(e){}return!1}()?function(e,t){return new CustomEvent(e,t)}:function(e,t){var n=t.bubbles,r=void 0!==n&&n,o=t.cancelable,i=void 0!==o&&o,a=t.detail,u=document.createEvent("CustomEvent");return u.initCustomEvent(e,r,i,a),u};function $(e,t,n){void 0===n&&(n=document.body),n.dispatchEvent(G(e,{detail:t,bubbles:!0}))}function K(e,t){return e.get("request")(e.get("config").frontLogApi+"collect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),keepalive:!0})}function Y(){var e,t,n,r=Date.now(),o=Math.floor(999999*Math.random());return""+r+(void 0===n&&(n="0"),(t=6)>(e=""+o).length?Array(t-e.length+1).join(n)+e:e)}var Q={name:"uid",run:function(e){var t=e.cookies.get("ta_uid");return t&&!function(e){if(19!==e.length)return!0;var t=parseInt(e.substr(0,13),10);return 1558602046426>t||t>Date.now()+80352e5}(t)||(t=Y()),e.cookies.set("ta_uid",t,63072e3,!0),t}},W="__P__wuid",X="__P__wuid_last_update_time",Z=["ANONYMOUS","AUTHENTICATED","APPLICANT","CANDIDATE","REGISTERED","CLIENT","EMPLOYEE","ADMINISTRATOR","GOD"],ee={name:"userInfo",stateKey:".",run:function(e,t){void 0===t&&(t={});var n=t.cookieName,r=t.anonymousId,o={userId:void 0===r?"1111":r,userStatus:"Not Logged In"},i=e.cookies.get(void 0===n?"psid":n);return i?e.get("tapi")(e,"session_status?sessionid="+encodeURIComponent(i)).then((function(e){var t=e.payload;return"OK"===e.resultCode?{userId:t.userId,userStatus:4>Z.indexOf(t.accessLevel)?"Not Logged In":"Logged In"}:o})).catch((function(){return o})):Promise.resolve(o)}};var te={name:"referrer",run:function(e){var t="",n=e.getOr("referrer");return n&&n.hostname!==e.location.hostname&&(t=n.hostname),t}},ne=function(e){return!!e&&Array.isArray(e)},re=function(e){switch(!0){case function(e){return null==e}(e):return!0;case function(e){return"string"==typeof e||e instanceof String}(e):return""===e;case ne(e):return 0===e.length;case function(e){return null!==e&&"object"==typeof e}(e):return 0===Object.keys(e).length}return!1},oe={name:"utmMarkers",stateKey:".",run:function(e){var n,r=e.location,o=w(e),i=r.query.utm_source||!o?r.query:o.query,a=r.hash.replace("#",""),u=a?P(a):{},c=S(y,i),s=S(g,i),l=S(g,u),f=re(s)?l:s;function d(t,n){for(var r=0,o=t;o.length>r;r++){var i=o[r],a=n[i];a?e.cookies.set(i,a,5184e3,!0):e.cookies.remove(i,!0)}}function p(t){return S(t,e.cookies.all)}function v(){return t({internal_source:""},c)}return f.utm_source?Object.assign({},(n=Date.now(),d(g,f),e.cookies.set("utm_date_set",n,5184e3,!0),{utmMarkers:Object.assign({},f,v(),{cookieDate:n,collectionMethod:"get"})}),function(){var e=i.position;if("string"!=typeof e)return d(h,{});var t,n={};return m.test(e)?(t=e.split(/\D/),n.ctx_position=t.length>1?t[1]:"",n.ctx_block=t[0]+e.replace(/\d/g,"")):(n.ctx_position=e,n.ctx_block=i.block),n.ctx_source=i.source||"",d(h,n),n}()):Object.assign({},function(){var t=p(g),n=te.run(e),r="",o=null,i=null;return t.utm_source?(r=t.utm_source,o=Number(e.cookies.get("utm_date_set"))||null,i="cookie"):(n&&(r=n,o=Date.now(),i="referrer",e.cookies.set("utm_date_set",o,5184e3,!0)),e.cookies.set("utm_source",r,5184e3,!0)),{utmMarkers:Object.assign({},t,v(),{utm_source:r,cookieDate:o,collectionMethod:i})}}(),p(h))}},ie={name:"dmpId",run:function(e){var t=e.getOr("config",{disableJsonp:!1}).disableJsonp;return e.cookies.all["dmp.id"]&&"no dmp_id"!==e.cookies.all["dmp.id"]?Promise.resolve(e.cookies.all["dmp.id"]):t||"client"!==e.env?Promise.resolve(""):e.get("jsonp")({url:"https://sync.datamind.ru/cookie/emitter/jsonp/",timeout:2e3}).then((function(e){try{return e.data.dmp_id}catch(e){return""}})).catch((function(){return""}))}},ae=function(e,t){return function n(){for(var r=arguments.length,o=Array(r),i=0;r>i;i++)o[i]=arguments[i];return e>o.length?function(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];return n.apply(this,o.concat(t))}:t.apply(this,o)}},ue=ae(2,(function(e,t){var n;function r(){var r=this,o=arguments;clearTimeout(n),n=setTimeout((function(){return t.apply(r,o)}),e)}return r.cancel=function(){return clearTimeout(n)},r}));function ce(e){return Object.keys(e)}var se={name:"layoutMedia",run:function(){var e={desktopLarge:"(min-width: 1600px)",desktopMedium:"(min-width: 1360px)",desktopSmall:"(min-width: 1024px)",tabletLarge:"(min-width: 768px)",tabletSmall:"(min-width: 600px)",mobile:"(min-width: 599x)"},t="mobile";try{for(var n=0,r=ce(e);r.length>n;n++){var o=r[n];if(matchMedia(e[o]).matches){t=o;break}}}catch(e){}return t},observe:function(e,t){addEventListener("resize",ue(300,t))}};var le,fe,de=(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n,r=function(e){return Math.round(e)/1e3},o=function(e){return function(t){return e.test(t)}},i=o(/\.js$/),a=o(/\.css$/),u=o(/\.(?:svg|png|jpeg|webp|jpg)$/),c=o(/\.(?:woff|eot|woff2|ttf)/);!function(e){e.html="html",e.js="js",e.css="css",e.img="img",e.font="font",e.other="other"}(n||(n={}));var s=function(e,t){if(e.getEntriesByType)return e.getEntriesByType(t)},l=function(e){var t=s(e,"paint");if(t&&t[0])return t[0].startTime},f=function(e,t){return e&&e[t]||0},d=function(e,t){return{duration:f(e,"duration")+r(t.duration),transferSize:f(e,"transferSize")+t.transferSize,encodedBodySize:f(e,"encodedBodySize")+t.encodedBodySize}},p=function(e){var t={},r=s(e,"resource");r&&r.length>0&&r.forEach((function(e){var r=function(e){switch(!0){case a(e):return n.css;case i(e):return n.js;case u(e):return n.img;case c(e):return n.font;default:return n.other}}(e.name.split("?",1)[0]);n[r]&&(t[r]=d(t[r],e))}));var o=s(e,"navigation");return o&&o.length>0&&(t[n.html]=d({},o[0])),t};t.browserTimings=function(){var e;try{if(!(e=window.performance).timing||!e.timing.loadEventEnd)throw 0===e.timing.loadEventEnd&&console.error("Library used at browser initialization page. Reed docs"),Error("Not implemented timing api")}catch(e){return{}}var t=e.timing,n=t.requestStart,o=t.responseStart,i=t.domComplete,a=t.loadEventEnd,u=t.domInteractive,c=t.navigationStart,s=[{key:"connection",start:c,end:n},{key:"backend",start:n,end:o},{key:"pageDownload",start:o,end:t.responseEnd},{key:"first-paint",start:0,end:l(e)},{key:"domInteractive",start:c,end:u},{key:"domComplete",start:c,end:i},{key:"pageLoadTime",start:c,end:a}],f={};return s.forEach((function(e){var t=r(e.end-e.start);f[e.key]=t>0||2e3>t?t:void 0})),f.download=p(e),f}}(le={exports:{}},le.exports),le.exports);(fe=de)&&fe.__esModule&&Object.prototype.hasOwnProperty.call(fe,"default");var pe=de.browserTimings,ve=function(e){return e.getEntries?e.getEntriesByType("resource").sort((function(e,t){var n=e.duration,r=t.duration;return n>r?1:n===r?0:-1})).reduce((function(e,t){var n,r=function(e){var t,n=e.name,r=e.duration;return{name:n=n.split("?",1)[0],duration:(t=r,Math.round(t)/1e3)}}(t),o=r.name,i=r.duration,a=function(e){return/\.js$/.test(e)?"js":/\.css$/.test(e)?"css":/\.(?:svg|png|jpeg)$/.test(e)?"img":/\.(?:woff|eot|woff2|ttf)/.test(e)?"font":"other"}(o);return e[a]?e[a][o]=i:e[a]=((n={})[o]=i,n),e}),{}):{}},me=function(){try{var e=window.performance,n=pe(),r=function(e){var t=e;if(!t.download)return{};for(var n={sizeTransferred:0,sizeResources:0},r=0,o=ce(t.download);o.length>r;r++){var i=o[r];t.download.hasOwnProperty(i)&&(n.sizeTransferred+=t.download[i].transferSize,n.sizeResources+=t.download[i].encodedBodySize)}return n}(n);return t({navigationStart:e.timing.navigationStart,timezone:-1*(new Date).getTimezoneOffset()/60,timings:n,requests:ve(e)},r)}catch(e){return{}}};var ge,he={name:"pageSpeed",run:function(e){return new Promise((function(e){"complete"===document.readyState?e():window.addEventListener("load",e)})).then((function(){return void 0===(e=0)&&(e=0),new Promise((function(n){setTimeout((function(){return n(t)}),e)}));var e,t})).then((function(){var e=me(),r=e.requests,o=e.timings,i=n(e,["requests","timings"]);return t(t(t({},i),o),{requests:r,timings:o})}))}},ye={name:"adblock",run:function(e,t){void 0===t&&(t={});var n=null;return t.fakeDivId?n=document.getElementById(t.fakeDivId):((n=document.createElement("div")).setAttribute("class","ads ad adsbox ad-placement carbon-ads"),n.setAttribute("style","height: 1px;width: 1px;position: absolute;left: -9999px;top: -9999px"),document.body.appendChild(n)),new Promise((function(e){setTimeout((function(){e(n&&0===n.offsetHeight?"yes":"no")}),20)}))}},we={name:"mobileOrientation",run:function(){var e=!0;try{e=window.orientation?90===Math.abs(Number(window.orientation)):"landscape"===screen.orientation.type.split("-")[0]}catch(e){}return e?"landscape":"portrait"},observe:function(e,t){window.addEventListener("orientationchange",t)}};function be(e){var t;return function(){return void 0===t&&(t=function(){try{var t="__storage_test__",n=e===ge.SessionStorage?sessionStorage:localStorage;return n.setItem(t,t),n.removeItem(t),!0}catch(e){return!1}}()),t}}!function(e){e[e.LocalStorage=0]="LocalStorage",e[e.SessionStorage=1]="SessionStorage"}(ge||(ge={}));var ke=be(ge.LocalStorage),Oe=be(ge.SessionStorage);function _e(e,t){ke()&&localStorage.setItem(e,JSON.stringify(t)),Oe()&&sessionStorage.setItem(e,JSON.stringify(t))}function Se(e){var t,n,r;if(ke())try{(t=localStorage.getItem(e))&&(r=JSON.parse(t))}catch(e){}if(void 0===t&&Oe())try{(n=sessionStorage.getItem(e))&&(r=JSON.parse(n))}catch(e){}return void 0===r||t&&n||_e(e,r),r}function Pe(e){return function(e,t){void 0===t&&(t=function(e){return e});var n=new WeakMap;return function(o){for(var i=[],a=1;arguments.length>a;a++)i[a-1]=arguments[a];var u=t(o),c=n.get(u);if(c)return c;var s=function(){n.delete(u)};return(c=e.apply(void 0,r([o],i))).then(s).catch(s),n.set(u,c),c}}(e,(function(e){return"undefined"!=typeof window?window:e}))}function Ee(e,t){var n,r,o=e.get("logger");if(o=(null===(n=o.child)||void 0===n?void 0:n.call(o,{name:"wuid",defaults:{remote:{emitLevels:{warn:!0,error:!0,fatal:!0}}}}))||o,!t){r=function(e){var t=e.cookies.all[W]||Se(W);if("undefined"!==t)return t}(e);var i=e.cookies.all[X]||Se(X),a=Date.now(),u=new Date(Number(i));if(!(!isFinite(Number(i))||a>u.setHours(u.getHours()+24))&&r)return Promise.resolve(r)}var c=function(t){var n=Date.now();e.cookies.set(W,t,31536e4,!0),e.cookies.set(X,n,31536e4,!0),_e(W,t),_e(X,n)},s=e.get("tapi"),l=e.cookies.all.__utma,f=[];l&&f.push("ga_utma="+encodeURIComponent(l)),!t&&r&&f.push("wuid="+encodeURIComponent(r));var d="webuser?"+f.join("&");return s(e,d).catch((function(e){o.warn(e,"Wuid provider fetch error")})).then((function(e){var t=e&&e.payload?e.payload.wuid:null;if(t)return c(t),t}))}var je={name:"wuid",run:Pe((function(e){return Ee(e,!1)})),invalidate:Pe((function(e){return Ee(e,!0)}))},xe="ta_visit_start_ts",Ie="ta_visit_num",Ne="ta_nr",Te={name:"taVisit",stateKey:".",run:function(e){var t=Number(e.cookies.get(Ie)||void 0);isFinite(t)||(t=0),e.cookies.get(xe)||(t?t+=1:t=1);var n=1===(t=t||1)?"new":"return";e.cookies.set(Ne,n,63072e3,!0),e.cookies.set(Ie,t,63072e3,!0);var r=Number(e.cookies.get(xe)||void 0);return isFinite(r)||(r=Date.now()),e.cookies.set(xe,r,1800,!0),{visitNum:t,visitStartTs:r,nr:n}}},Le={name:"userType",run:function(e){return e.cookies.all.userType||"Visitor"}},De={name:"pageLanding",run:function(e){var t=e.cookies.all.pageLanding;t&&"/"===t[0]&&(t=e.location.origin+t);var n=t||e.location.origin+e.location.pathname;return e.cookies.set("pageLanding",n,!1,!0),n}},Ae=ae(2,(function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});for(var n=t,r=0;e.length>r;r++){if(null==n)return;n=n[e[r]]}return n})),Ce=[{name:"dspClickId",run:function(e){var t=e.location.query.dsp_click_id||e.cookies.all.dsp_click_id||"no dsp_click_id";return e.cookies.set("dsp_click_id",t,5184e3,!0),t}},Q,ee,oe,b,Le,De,te,Te,ie,se,he,ye,we,je,{name:"previousPage",run:function(e){var t=e.getOr("referrer"),n=e.location,r=1===Ae(["performance","navigation","type"],window)?n:t;if(r&&r.host===n.host)return r.href.split("?")[0]}}];var Me=function(){var e=document.body,t=document.documentElement;return{viewport:document.documentElement.clientHeight,height:Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight),scrollTop:window.pageYOffset||document.documentElement.scrollTop}},Ue=ae(2,(function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return Object.assign.apply(Object,[{}].concat(t))})),Fe={scrollEventName:"pageScroll",eventDelay:750},qe={viewport:"ta_viewport_previous",scroll:"ta_scroll_previous",height:"ta_height_previous"},Re={viewport:"previousViewport",scroll:"previousScroll",height:"previousHeight"};function ze(e,t){try{sessionStorage.setItem(qe[e],""+t)}catch(e){return}}function Be(e){for(var t=0,n=ce(e);n.length>t;t++){var r=n[t],o=e[r];o&&ze(r,o)}}function He(){return["viewport","scroll","height"].reduce((function(e,t){var n=function(e){try{var t=sessionStorage.getItem(qe[e])||"",n=parseInt(t,10);return isNaN(n)?void 0:n}catch(e){return}}(t);return void 0!==n&&(e[Re[t]]=n),e}),{})}function Je(e,t){return u(e,t.split("."))}function Ve(e,t,n){return Object.keys(t).every((function(r){return function(e,t){return t.split("|").some((function(t){return void 0!==Je(e,t)}))}(e,r)||t[r]&&Date.now()-n>=t[r]}))}function Ge(e){var t,n=e.timeouts,r=void 0===n?{}:n,o=e.readyEvent,i=e.beforeEvent,a=e.tracked,u=e.blocked,c=e.resetOnSPATransition,s=void 0!==c&&c,l=void 0!==a&&a,f=void 0!==u&&u,d=Date.now(),p=!1,v=function(){if(!t)throw Error("plugin isn't bound");var e;p||f||l||!function(){if(!t)throw Error("plugin isn't bound");return Ve(t.state,r,d)}()||(p=!0,i&&$(i,{waitFor:function(t){e=t}},document),e?Promise.resolve(e).then((function(){t.event(o)})):t.event(o))},m=Object.keys(r),g=function(){d=Date.now(),l=!1,p=!1,v(),p||h()},h=function(){m.forEach((function(e){var t=r[e];isFinite(t)&&t&&setTimeout(v,t+1)}))};return{name:"data-observer",trySend:v,setTracked:function(e){l=e,p=e},setBlocked:function(e){f=e,t&&!f&&v()},plugin:function(e){t=e.tracking,h(),setTimeout(v),t.on("event:"+o,(function(){if(l=!0,T.getItem("tcs:tracking:do")){console.group("do:"+o);for(var e=0,n=m;n.length>e;e++)for(var r=0,i=n[e].split("|");i.length>r;r++){var a=i[r],u=Je(t.state,a);console.log(a,": "+typeof u,"=",u)}console.groupEnd()}})),t.on("change",v),t.on("do:"+o+":invalidate",v),s&&t.on("newLocation",g)}}}var $e={wuid:7e3};function Ke(){return window._satellite&&(window._satellite.initialized||window.__satelliteLoaded)}function Ye(){return Ke()?Promise.resolve():new Promise((function(e){var t,n;t=e,n=window.setInterval((function(){Ke()&&(clearInterval(n),t())}),100)}))}var Qe=function(e){return ae(e.length,e)},We=function(e,t){var n=e.length;if(n!==t.length)return!1;for(var r=0;n>r;r++)if(!Ze(e[r],t[r]))return!1;return!0},Xe=function(e,t){var n=Object.keys(e),r=n.length;if(r!==Object.keys(t).length)return!1;for(var o=0;r>o;o++){var i=n[o];if(!Object.prototype.hasOwnProperty.call(t,i)||!Ze(e[i],t[i]))return!1}return!0},Ze=function(e,t){if(e===t)return!0;if(typeof e!=typeof t||e!==Object(e)||!e||!t)return!1;if(ne(e)&&ne(t))return We(e,t);var n=Object.prototype.toString.call(e);return"[object Object]"===n&&Object.prototype.toString.call(t)===n?Xe(e,t):function(e,t){return""+e==""+t}(e,t)},et=Qe(Ze);function tt(e){for(var t=location.protocol,n="",r=!0,o=0,i=ce(e);i.length>o;o++){var a=i[o];void 0!==e[a]&&(e.hasOwnProperty(a)&&(r?(n+="?",r=!1):n+="&",n+=a+"="+e[a]))}return t+"//dp.tinkoff.ru/pixel"+n}function nt(e,t,n){var r=null;return function(o){var i,a,u=function(e,t){var n=new Set(Object.keys(e)),r={};return n.forEach((function(o){for(var i=0,a=e[o];a.length>i;i++){var u=Ae(a[i].split("."),t.state);if(void 0!==u){r[o]=u+"",n.delete(o);break}}})),[r,Array.from(n)]}(t,e),c=u[0],s=u[1],l=et(r,c);return 0===s.length||l||null===(i=null==n?void 0:n.missedParams)||void 0===i||i.call(n,s,o),null===r||l||null===(a=null==n?void 0:n.differentParams)||void 0===a||a.call(n,r,c,o),r=c,c}}var rt=[1,5,10,15,20,25,30,35];function ot(e,n){!function(e,n){var r=tt(t(t({},n("pageload")),{group:"timer",event:"pageload",eventid:(new Date).getTime()}));e.addPixel(r)}(e,n),function(e,n){rt.forEach((function(r){var o="timer"+r;setTimeout((function(){var r=tt(t(t({},n(o)),{group:"timer",event:o,eventid:(new Date).getTime()}));e.addPixel(r)}),1e3*r)}))}(e,n)}function it(e,n,r,o){var i=o.warnMessage,a=o.component,u=void 0===a?"dsp-pixel":a,c=n.get("logger"),s=n.location,l=n.get("collectLog");i&&c.warn(i);var f=Ae(["state","appName"],e);return f||c.warn("Не могу достать appName при логгировании в dsp-pixels-plugin"),l(n,t(t(t({},f?{appName:f}:{}),{pageUrl:""+s.origin+s.pathname,component:u}),r)).catch((function(e){c.warn(e,"Не могу залоггировать событие ошибки в dsp-pixels-plugin")}))}function at(e,t,n){["product_name","product_category"].some((function(e){return-1!==n.missedParams.indexOf(e)}))&&it(e,t,n,{warnMessage:"Не смогли собрать следующие базовые параметры dsp-пикселей: "+Array.from(n.missedParams).join(", "),component:"dsp-pixels-empty-product-params"})}function ut(e,t,n){return it(e,t,n,{component:"dsp-pixels-different-product-params",warnMessage:"Разные продуктовые параметры собраны для dsp-пикселей"})}var ct,st={product_name:["productName"],product_category:["productCategory","productType"],ic:["dspClickId"],dco_ic:["dco.ic"],refref:["dco.referrer"]};function lt(e,n){var r=!0;e.on("setProductParamsChangeMode",(function(e){r=!e}));var o=nt(e,st,{missedParams:function(t,r){at(e,n,{missedParams:t,event:r})},differentParams:function(t,o,i){r&&ut(e,n,{originalValues:t,values:o,event:i})}});return function(e){return function(e){for(var n,r=t({},e),o=0,i=["product_name","product_category"];i.length>o;o++){var a=i[o],u="string"==typeof(n=e[a])?n.toLowerCase().replace(/\s/g,"_"):"";void 0!==u&&(r[a]=u)}return r}(t(t({},o(e)),{referer:encodeURIComponent(document.location.href),resourceScript:!0,id:"25"}))}}!function(e){e.FUNNEL="funnel",e.DCO="dco"}(ct||(ct={}));var ft,dt=ae(2,(function(e,t){void 0===t&&(t={});var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=e(t[r],r,t));return n})),pt={scApplied:ct.DCO,step0:ct.FUNNEL,step1:ct.FUNNEL,step2:ct.FUNNEL,step3:ct.FUNNEL,step4:ct.FUNNEL,step5:ct.FUNNEL,thankyoupage:ct.FUNNEL,approve:ct.FUNNEL,duplicate:ct.FUNNEL,priorapprove:ct.FUNNEL},vt=((ft={})[ct.FUNNEL]={sub1:["hid"]},ft[ct.DCO]=void 0,ft);function mt(e){return{name:"addDspPixel",init:function(n){var r=n.tracking,o=n.context,i=dt((function(e,t){if(e)return nt(r,e,{missedParams:function(e,n){!function(e,t,n){it(e,t,n,{component:"dsp-pixels-empty-group-params",warnMessage:"Собрали не все параметры для группы "+n.pixelGroup+" dsp-пикселей, нет следующих параметров: "+n.missedParams.join(", ")})}(r,o,{event:n,pixelGroup:t,missedParams:e})},differentParams:function(e,n,i){!function(e,t,n){it(e,t,n,{warnMessage:"Для группы "+n.pixelGroup+" в dsp-пикселях собраны разные параметры",component:"dsp-pixels-different-group-params"})}(r,o,{event:i,pixelGroup:t,originalValues:e,values:n})}})}),vt);return function(n,o){var a;void 0===o&&(o={});var u=pt[n],c=tt(t(t(t(t({},e(n)),{event:n,group:pt[n],eventid:(new Date).getTime()}),null===(a=i[u])||void 0===a?void 0:a.call(i,n)),o));r.addPixel(c)}}}}var gt,ht="object"==typeof window.initialState;!function(e){e.Init="init",e.Track="track"}(gt||(gt={}));var yt={name:"fbq",init:function(e){var t,n=e.tracking,r=e.context.get("logger");return function(e,o){switch(e){case gt.Init:void 0!==t&&t!==o&&r.info("Rewrite existing fbq id "+t+" with "+o),t=o;break;case gt.Track:t?(!function(e,t,n){var r=location.protocol;e.addPixel(r+"//www.facebook.com/tr"+"?id="+t+"&ev="+n)}(n,t,o),r.info("Fbq pixel has been sent, event: "+o+", id: "+t)):r.error("Cannot send FB pixel without ID, event: "+o);break;default:r.error("Cannot proccess this type of call in fbq util: "+e)}}}},wt=["personalizedLandingMetrics","state","dcoGeneralId"];function bt(e){var t=[];try{t=(T.getItem("dco_general_ids")||"").split(";").filter((function(e){return""!==e})).map((function(e){var t=e.split(","),n=t[0],r=Number(t[1]);if(!isFinite(r))throw Error("Failed to parse timestamp of id");return{id:n,timestamp:r}}))}catch(t){e.error(t,"Плагин allDcoGeneralIds не смог получить id")}return t}var kt=function(e){return T.setItem("dco_general_ids",function(e){return e.map((function(e){return e.id+","+e.timestamp})).join(";")}(e)),e};function Ot(e){var t=(new Date).getTime()-5184e3;return e.reduce((function(e,n){return t>n.timestamp||e.push(n),e}),[])}function _t(e){return e.sort((function(e,t){return t.timestamp-e.timestamp}))}var St=Qe((function(e,t){var n;e.extend(((n={}).allDcoGeneralIds=t.map((function(e){return e.id})).join(";"),n))}));function Pt(){for(var e=[],t=0;arguments.length>t;t++)e[t]=arguments[t];var n=window.dataLayer||(window.dataLayer=[]);n.push(arguments)}function Et(e){return void 0===e&&(e=!1),function(t){return e?Promise.resolve(!0):(n=t,r={crossOrigin:"anonymous"},void 0===r&&(r={}),new Promise((function(e,t){var o=document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript",i.src=n,Object.assign(i,r),o.appendChild(i),i.onload=function(){return e(i)},i.onerror=function(){return t(Error("Error when loading "+n+" script"))}}))).then((function(){return e=!0,!1}));var n,r}}var jt={name:"adwPageloadPixel",init:function(e){var t=e.context.get("logger"),n=Et(document.querySelectorAll('script[src^="https://www.googletagmanager.com/gtag/js?id="]').length>0);return function(e){var r="AW-"+e;return n("https://www.googletagmanager.com/gtag/js?id="+r).then((function(e){e||Pt("js",new Date),Pt("config",r)})).catch((function(e){t.error(e,"Cannot load gtag script in adwPageloadPixel util")}))}}};var xt,It=Object.assign({},window.twtConfig,window.twtDebugConfig);(function(e,t,n){Array.isArray(t)||(n=t,t=[]);var o=Object.assign({},v,n);e.bind("config",o);var i=function(e){var t=e.get("config"),n=e.getOr("log"),r=t.log,o=e.getOr("logger"),i=t.logger;n&&n(I),r&&r(I);var a,u=i||r||o||n;return"object"==typeof u?u:{warn:a="function"==typeof u?u:x,debug:a,error:a,info:a,log:a}}(e);e.bind("logger",i);var a="u"!==(typeof window)[0],c={};a&&(c=window[o.global]?window[o.global]:c,window[o.global]=c,c.localStorage=T,c.sessionStorage=L);var s,f=e.emitter||(s=s||Object.create(null),{on:function(e,t){(s[e]||(s[e]=[])).push(t)},off:function(e,t){s[e]&&s[e].splice(s[e].indexOf(t)>>>0,1)},emit:function(e){var t=[].slice.call(arguments,1);(s[e]||[]).map((function(e){e.apply(void 0,t)})),(s["*"]||[]).map((function(n){n.apply(void 0,[e].concat(t))}))}});Object.assign(c,f),c.on=function(e,t){e&&"event:"===e.substr(0,6)&&a?document.body.addEventListener(e.substr(6),(function(e){e instanceof CustomEvent&&t(e.detail)})):f.on(e,t)},c.state=Object.assign({},c.state,o.initialState);var d=[],m=!1;function g(e){m=!0,d.push(e)}function h(t,n){c.emit("event",t,n),e.getOr("event",D)(t,n),i.info("Dispatched event: ",t,n)}var y,w=!1,S=function(e){var t=c.state;return t!==e&&(c.state=e,c.emit("change",e,t)),c},P=(y=[],{run:function(e,t){for(var n=[],r=2;arguments.length>r;r++)n[r-2]=arguments[r];var o=y.map((function(t){return t(e)}));return j.apply(void 0,o)(t).apply(void 0,n)},add:function(e){y.push(e)}});c.use=function(t){var n=t.plugin||t;try{n({config:o,tracking:c,context:e,update:S,providersPipeline:P,addEventsBlocker:g})}catch(e){i.error(e,"Failed to initialize plugin "+t.name)}return c},c.event=function e(t,n){return!a||document.body||w||(g(new Promise((function(e){document.addEventListener("DOMContentLoaded",e)}))),w=!0),!1===m?h(t,n):Promise.all(d).then((function(r){m=r.length!==d.length,e(t,n)})),c},c.addPixel=function(e){return function(t){return document.createElement("img").src=t,e}}(c),c.addPixels=function(e){return function(t,n){void 0===n&&(n={});var r=n.timeout,o=void 0===r?3e3:r,i=n.completeEvent,a=void 0===i?"pixelRequestsCompleted":i,u=t.map(_),c=!1;return O?Promise.resolve(e.event(a,{timeout:c,urls:t})):Promise.race([k(u),new Promise((function(e){return setTimeout((function(){c=!0,e()}),o)}))]).then((function(){return e.event(a,{timeout:c,urls:t})}))}}(c),c.utils={},c.addUtil=function(t){var n=t.name,r=t.init;try{c.utils[n]=r({tracking:c,context:e}),c.emit("util-provided:"+n,c.utils[n])}catch(e){i.error(e,"Failed to initialize util "+n)}return c},c.callUtil=function(e){for(var t=[],n=1;arguments.length>n;n++)t[n-1]=arguments[n];return new Promise((function(n){var r;e in c.utils?n((r=c.utils)[e].apply(r,t)):c.on("util-provided:"+e,(function(e){n(e.apply(void 0,t))}))})).catch((function(t){i.error(t,"Tracking util "+e+" code failed")}))},c.extend=function(e){i.info("Tracking extend:",e);var t=Object.keys(e).reduce((function(t,n){return l(t,n.split("."),e[n])}),c.state);return S(t)},c.remove=function(){for(var e=[],t=0;arguments.length>t;t++)e[t]=arguments[t];i.info("Tracking remove:",e.join(", "));var n=p.apply(void 0,r([c.state],e.map((function(e){return e.split(".")}))));return S(n)},c.updateLocation=function(){var t;return S((t=c.state,"client"===e.env&&e.bind("location",E()),l(t,"url",b.run(e)))),c.emit("newLocation"),c},c.update=S;var N=o.providers||{},A=function(t,n){void 0===n&&(n=!0);var r,o=t.stateKey||t.name,a=N[t.name];if(c.emit("provider-run",t.name),!n&&t.lazy)if("."===o)i.error("Provider "+t.name+" with stateKey='.' cannot be lazy");else{var s=u(c.state,o.split("."));if(void 0!==s)return c.emit("provider-resolved",t.name,s),Promise.resolve()}try{r=Promise.resolve(P.run(t,t.run,e,a))}catch(e){r=Promise.reject(e)}return r.then((function(e){!function(e,t){var n;c.extend(e&&"."!==e?((n={})[e]=t,n):t)}(o,e),c.emit("provider-resolved",t.name,e)})).catch((function(e){if(!e||"ESkipApply"!==e.code)throw c.emit("provider-error",t.name,e),i.error(e,"Provider "+t.name+" error"),e}))},C=function(t){var n=t.map((function(t){return"client"===e.env&&t.observe&&t.observe(e,(function(){A(t,!0)})),A(t,!1)}));return n.length?k(n):Promise.resolve()};return c.ready=Promise.resolve().then((function(){return C(t)})),c.waitFor=function(e){return e in c.state?Promise.resolve(c.state[e]):new Promise((function(t,n){c.on("provider-resolved",(function(n,r){n===e&&t(r)})),c.on("provider-error",(function(t,r){t===e&&n(r)}))}))},c.fullfill=C,c._version="4.78.11",h("tracking-created",c),c})(new A(t(t({},C),{logger:-1!==(T.getItem("debug")||"").indexOf("Tinkoff:info:tracking")?console:void 0,jsonp:M,parseUrl:U,request:R,location:E(),cookies:V(),referrer:document.referrer?U(document.referrer):void 0,event:$,collectLog:K})),Ce,It).use((function(e){var t=e.tracking,n=e.addEventsBlocker;window.trackingStore=t,window.addPixel=t.addPixel,n(Ye())})).use((function(e){var t=e.tracking;t.on("event:track-data",(function(e){t.extend(e)}))})).use((function(e){var t=e.tracking,n=performance.timing.navigationStart;t.on("newLocation",(function(){n=+new Date,t.remove("timing")}));for(var r=function(e){t.on("event:"+e,(function(){var r;n&&t.extend(((r={})["timing."+e]=+new Date-n,r))}))},o=0,i=["pageLoad","partnerLoad"];i.length>o;o++){r(i[o])}})).use((xt={timings:{timeOnReading:["pageLoad","formFirstInteraction"],timeOnStep1:["formFirstInteraction","formStep2"],timeOnStep2:["formStep2","formStep3"],timeOnStep3:["formStep3","formStep4"],timeOnStep4:["formStep4","formSubmit"],timeOnVerification:["formSubmit","formMobileVerified"]}},void 0===xt&&(xt={}),function(e){var t=e.tracking,n={},r=xt.timings,o=void 0===r?{}:r;t.on("newLocation",(function(){t.remove("stepDurations")})),Object.keys(o).forEach((function(e){var r=o[e];t.on("event:"+r[0],(function(){n[e]=Date.now()})),t.on("event:"+r[1],(function(){var r,o=Date.now(),i=n[e];i&&o>=i&&t.extend(((r={})["stepDurations."+e]=Math.round((o-i)/1e3),r))}))}))})).use(function(e){var r=Ue(Fe,e),o=r.eventDelay,i=r.scrollEventName;return function(e){var r=e.tracking,a={viewport:0,height:0,scroll:0};function u(){var e=Me(),r=e.scrollTop,o=n(e,["scrollTop"]);return a=t(t({},o),{scroll:Math.max(a.scroll,r)})}function c(){a={viewport:0,height:0,scroll:0};var e=Me().scrollTop;r.extend(t(t({scrollOnPage:e},u()),He()))}c(),window.addEventListener("scroll",ue(o,(function(){var e=u();r.extend(e).event(i,e)}))),window.addEventListener("beforeunload",(function(){Be(a)})),r.on("newLocation",(function(){Be(a),c()}))}}()).use(function(e){var t=Object.create(null),n=function(n,r){return t[n]||(t[n]=function(e,t){var n=t.key;if(!n)throw Error("options.key is empty");return function(){for(var r=[],o=0;arguments.length>o;o++)r[o]=arguments[o];if(!ke())return e.apply(void 0,r);var i=n+"_expire",a=Number(localStorage.getItem(i)),u=localStorage.getItem(n);if(!isNaN(a)&&Date.now()<a&&u)return JSON.parse(u);localStorage.removeItem(i);var c=e.apply(void 0,r);return Promise.resolve(c).then((function(e){localStorage.setItem(n,JSON.stringify(e)),t.age&&localStorage.setItem(i,""+(Date.now()+1e3*t.age))})),c}}(r,e.providers[n])),t[n]};return function(t){t.providersPipeline.add((function(t){var r=t.name;return function(t){return function(){for(var o=[],i=0;arguments.length>i;i++)o[i]=arguments[i];var a=r in e.providers?n(r,t):t;return a.apply(void 0,o)}}}))}}({providers:{device:{key:"dpDeviceData",age:12096e5}}})).use(function(e){var t=e.timeouts;return function(e){var n=e.tracking,r=Ge({timeouts:t,readyEvent:"partnerLoad",blocked:!0});return n.on("event:pageLoad",(function(){Object.keys(t).every((function(e){return void 0!==u(n.state,e.split("."))}))||r.setBlocked(!1)})),r}}({timeouts:{dmpId:7e3,hdRequestInfo:7e3}})).use(function(e){void 0===e&&(e={});var t=e.timeouts,n=e.waitFor,r=Ge({readyEvent:"pageLoad",beforeEvent:"beforePageLoad",timeouts:void 0===t?$e:t,tracked:e.tracked,resetOnSPATransition:!0,blocked:!!n});return n&&n.then((function(){r.setBlocked(!1)})),r}(t({timeouts:{wuid:7e3}},u(It,["plugins","pageLoad"])))).use((function(e){var t=e.tracking,n=e.context.get("logger"),r=t.state,o=r.appName,i=r.uaParser;if(!r.adminAppName){if(n.info("App doesn't provide adminAppName, fallback value will be used"),!i||!o)return void n.warn("uaParser or appName is not provided, cannot compute adminAppName");t.extend({adminAppName:""+("mobile"===i.deviceType?"m":"")+o})}})).use((function(e){var t=e.tracking,n=e.context,r=n.get("logger"),o=t.waitFor("dspClickId"),i=ht?new Promise((function(e){return t.on("do:pageLoad:invalidate",e)})):Promise.resolve(),a=function(e){return r.warn("Ожидание "+e+" tracking.state завершилось с ошибкой. Dsp-пиксели могут быть потеряны")};Promise.all([i.catch((function(){return a("server")})),o.catch((function(){return a("client")}))]).then((function(){var e=lt(t,n);ot(t,e),t.addUtil(mt(e))}))})).addUtil(yt).use((function(e){var t,n=e.tracking,r=e.context.get("logger"),o=Ae(wt,n.state);!function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(){for(var e=t.length-1,n=t[e].apply(t,arguments),r=e-1;r>=0;r--)n=t[r](n);return n}}(St(n),kt,_t,Ot,(t=o,function(e){var n,r=(n=t)?n.split("-")[0]:void 0;return r&&!e.some((function(e){return e.id===r}))&&e.unshift({id:r,timestamp:(new Date).getTime()}),e}))(bt(r))})).addUtil(jt)}();
//# sourceMappingURL=client.js.map
